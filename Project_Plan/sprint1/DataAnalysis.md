# Sprint 1 数据分析详细规划书

## "行业的冰与火之歌" - 荷兰行业薪酬变迁分析 (2010-2024)

### 📊 故事核心主题

"曾经并肩的行业，15 年后薪资差距达 3 倍——谁被时代抛下？"

### 🎯 分析目标

通过数据验证并计算出三个关键"大数字"(Big Numbers)：

1. **增长冠军**：2010-2024 年间薪酬增长最快的行业及倍数
2. **衰退之王**：2010-2024 年间薪酬衰退最严重的行业及幅度
3. **差距倍数**：2024 年最高薪酬行业与最低薪酬行业的差距倍数

---

## 第一阶段：数据探索与质量评估 (Day 1-2)

### 1.1 数据源理解

**核心数据集**: CBS 85919ENG - 荷兰员工薪酬、就业数据

- **时间范围**: 2010-2024 年
- **地理范围**: 荷兰全国
- **核心指标**: 员工人均薪酬（Compensation per FTE，单位：千欧元）

### 1.2 数据质量检查要点

- [ ] 检查 2010-2024 年每个行业每年的数据完整性
- [ ] 识别缺失值模式（随机缺失 vs 系统性缺失）
- [ ] 标记数据状态：最终数据(2010-2023) vs 临时数据(2024)
- [ ] 检查极端值和异常值

### 1.3 行业分类标准化

建立 19 个一级行业的映射关系，确保 2010-2024 年分类一致性。

**行业代码映射表**:

```
A - 农业、林业和渔业
B - 采矿和采石
C - 制造业
D - 电力和燃气供应
E - 供水和废物管理
F - 建筑业
G - 批发和零售贸易
H - 运输和仓储
I - 住宿和餐饮服务
J - 信息和通信
K - 金融机构
L - 房地产活动
M - 专业咨询服务
N - 商业支持服务
O - 公共管理
P - 教育
Q - 卫生和社会工作
R - 文化体育娱乐
S - 其他服务活动
```

### 1.4 极端值检测策略

- **IQR 方法**: 识别超出 Q1±1.5×IQR 范围的异常值
- **Z-score 方法**: |z| > 3 视为极端值
- **业务验证**: 与重大经济事件（金融危机、疫情）对应检查

---

## 第二阶段：数据清洗与预处理 (Day 3-4)

### 2.1 缺失值处理策略

#### 缺失类型识别

1. **结构性缺失**: 行业在特定年份不存在（如新兴行业）
2. **临时性缺失**: 统计延迟导致的个别年份缺失
3. **2024 年临时数据**: 标记为 provisional，降低置信度

#### 处理决策树

```
行业数据完整性 ≥ 90%?
├─ 是：线性插值填补
└─ 否：同行业平均水平替代

缺失年份连续 ≤ 2年?
├─ 是：插值法
└─ 否：剔除该行业分析
```

### 2.2 通胀调整计算

使用荷兰 CPI 指数（2015 年=100 基准）：

```
实际薪酬 = 名义薪酬 × (100 / 当年CPI)

关键通胀调整系数：
2010年: ×1.097  (100/91.2)
2020年: ×0.942  (100/106.2)
2024年: ×0.757  (100/132.1)
```

### 2.3 行业筛选标准

- **就业规模**: ≥10,000 全职等效岗位
- **数据质量**: 2010-2024 年完整性 ≥85%
- **经济代表性**: 排除占比<0.3%的微型行业

---

## 第三阶段：核心分析计算 (Day 5-7)

### 3.1 增长冠军计算

#### 计算公式

```
增长倍数 = 2024年实际薪酬 / 2010年实际薪酬
复合增长率(CAGR) = (2024值/2010值)^(1/14) - 1
```

#### 验证步骤

1. **数据完整性验证**: 确保 2010 和 2024 年数据完整
2. **异常波动检查**: 排除某年异常高/低值影响
3. **行业规模校正**: 用就业人数加权平均

#### 预期候选行业

- **J 行业（信息通信）**: 数字化转型红利
- **M 行业（专业服务）**: 知识经济崛起
- **K 行业（金融）**: 金融科技发展

### 3.2 衰退之王识别

#### 筛选标准

```python
def identify_decline_king(data):
    # 计算衰退幅度
    decline_rate = ((2010_value - 2024_value) / 2010_value) * 100

    # 排除标准
    if industry_size < 5000: return None  # 规模过小
    if data_quality < 80: return None    # 数据质量差
    if structural_change: return None     # 行业重组

    return min(decline_rates)  # 选择最大衰退幅度
```

#### 预期衰退行业

- **B 行业（采矿）**: 资源枯竭+环保政策
- **传统制造业子行业**: 自动化替代
- **贸易相关行业**: 电商冲击

### 3.3 差距倍数计算

#### 计算方法

```
2024年薪酬差距 = 最高行业薪酬 / 最低行业薪酬

分层分析：
- 一级行业间差距
- 二级行业间差距
- 考虑就业规模的加权差距
```

#### 薪酬分布特征

- **高薪酬行业**: J、K、M 行业（预期 €90k+）
- **低薪酬行业**: I、P、S 行业（预期 €25k-35k）
- **基尼系数**: 衡量行业间薪酬不平等程度

---

## 第四阶段：数据验证与敏感性分析 (Day 8)

### 4.1 统计验证

#### Bootstrap 置信区间

```python
# 重采样1000次计算95%置信区间
def bootstrap_confidence(data, n_bootstrap=1000):
    growth_rates = []
    for _ in range(n_bootstrap):
        sample = data.sample(n=len(data), replace=True)
        growth = sample[2024].mean() / sample[2010].mean()
        growth_rates.append(growth)

    return np.percentile(growth_rates, [2.5, 97.5])
```

#### 敏感性测试

1. **时间窗口**: 测试 2011-2023、2012-2024
2. **通胀基准**: CPI vs GDP 平减指数
3. **行业聚合**: 一级 vs 二级行业分类

### 4.2 业务合理性检查

#### 经济事件对应

- **2010-2014**: 金融危机后复苏期
- **2015-2019**: 数字化转型加速
- **2020-2022**: 疫情影响
- **2023-2024**: 通胀压力期

#### 政策影响验证

- **最低工资政策**: 对低薪行业的影响
- **数字化战略**: 对 J 行业的推动作用
- **绿色转型**: 对 B 行业的冲击

---

## 第五阶段：故事包装与输出 (Day 9)

### 5.1 三个 Big Numbers 最终确认

#### 示例输出格式（待实际计算）

```
增长冠军：
"信息和通信行业15年增长2.8倍，从€45,200跃升至€126,600"

衰退之王：
"采矿和采石行业15年衰退35%，从€65,800跌至€42,700"

差距倍数：
"2024年最高薪行业是最低薪行业的5.1倍"
```

### 5.2 配套数据输出

#### 可视化图表

1. **时间序列图**: 2010-2024 各行业薪酬变化趋势线
2. **排名变化图**: 2010 年 vs2024 年行业薪酬排名对比
3. **分布箱线图**: 行业薪酬分布及异常值展示

#### API 数据格式

```json
{
  "story": "industry_ice_fire",
  "analysis_period": "2010-2024",
  "inflation_adjusted": true,
  "key_metrics": {
    "growth_champion": {
      "industry": "J Information and communication",
      "growth_multiple": 2.8,
      "start_value": 45.2,
      "end_value": 126.6,
      "unit": "thousand_euros_per_fte"
    },
    "decline_king": {
      "industry": "B Mining and quarrying",
      "decline_percentage": -35.2,
      "confidence_interval": [-40.1, -30.3]
    },
    "gap_2024": {
      "highest": { "industry": "K Financial", "value": 145.2 },
      "lowest": { "industry": "I Accommodation", "value": 28.4 },
      "multiple": 5.1
    }
  }
}
```

### 5.3 质量检查清单

#### 数据质量指标

- [ ] 数据完整性 ≥ 95%
- [ ] 异常值比例 ≤ 5%
- [ ] 行业覆盖率 ≥ 90%
- [ ] 统计显著性 p < 0.05

#### 业务验证

- [ ] 与历史经济事件对应
- [ ] 行业专家 review 通过
- [ ] 故事 hook 震撼性确认
- [ ] 技术实现可行性验证

---

## 第六阶段：风险预案与备选方案

### 6.1 高风险场景应对

#### 场景 1：数据质量问题

- **问题**: 2024 年临时数据偏差大
- **应对**: 使用 2023 年最终数据，明确标注数据时效性

#### 场景 2：故事效果不足

- **问题**: 一级行业差异不够震撼
- **备选**: 聚焦制造业细分（高科技 vs 传统制造）

#### 场景 3：行业定义变更

- **问题**: 2010-2024 年间分类标准调整
- **应对**: 建立详细映射表，统一历史分类

### 6.2 时间计划与里程碑

| 日期    | 里程碑         | 交付物           |
| ------- | -------------- | ---------------- |
| Day 1-2 | 数据探索完成   | 数据质量报告     |
| Day 3-4 | 清洗预处理完成 | 干净数据集       |
| Day 5-6 | 核心计算完成   | 三个 Big Numbers |
| Day 7-8 | 验证分析完成   | 敏感性分析报告   |
| Day 9   | 故事包装完成   | 最终数据包       |

### 6.3 沟通机制

- **每日进度**: Slack/邮件简报
- **关键节点**: 15 分钟 standup 会议
- **决策确认**: 每个里程碑 go/no-go 评审

---

**执行状态**: 规划完成，可立即开始第一阶段数据探索
**预期成果**: 震撼的"行业冰与火"数据故事，支撑 Sprint 1 上线目标
